<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>test</title>

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="css/style.css">

    <!--  -->

</head>

<body>

    <div id="mainContainer">
        <div id="headerContainer">
            <div id="imageContainer">
                <img src="https://png.pngtree.com/element_pic/00/16/07/155788a15798b81.jpg">
            </div>
            <div id="headerHeadlines">
                <h1> Patrick Brix </h1>
                <p id="studying"></p>
                <p id="lookingForInternship"></p>
            </div>
        </div>
        <div id="languageContainer">
            <p id="chooseLanguage"></p>
            <div>
                <img id="flagEnglish" class="flag" src="assets/images/englishFlag.png">
                <img id="flagDanish" class="flag" src="assets/images/danishFlag.png">
            </div>
        </div>
        <div id="descriptionContainer">
        
        </div>
        <div id="qualificationsContainer">
            <div id="leftContainer">
                <div id="skillBox">
                    <div class="skillSectionWrapper">
                        <p id="bestSkillHeadline" class="minorHeadline"></p>
                        <div id="bestSkillBox" class="skillSection">
                            <p class="skill">Javascript</p>
                            <p class="skill">CSS / SASS</p>
                            <p class="skill">PHP</p>
                            <p class="skill">HTML</p>
                        </div>
                    </div>
                    <p id="secondarySkillHeadline" class="minorHeadline"></p>
                    <div id="secondarySkillBox" class="skillSection">
                    </div>
                    <p id="someExperienceHeadline" class="minorHeadline"></p>
                    <div id="someExperienceBox" class="skillSection">
                    </div>
                </div>
            </div>
            <div id="rightContainer">
            
            </div>
        </div>
    </div>

    <script>
        // Global variable to set language
        var globalLanguage;

        function getAndApplyLanguage(language) {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    globalLanguage = JSON.parse(this.responseText)
                    // Writing the JSON strings to the DOM by matching key name and elem id name
                    var elems = document.body.getElementsByTagName("*");
                    for (var i = 0; i < elems.length; i++) {
                        if (globalLanguage[elems[i].id]) {
                            elems[i].innerHTML = globalLanguage[elems[i].id]
                        }
                    }
                }
            };
            xhttp.open("GET", "languages/" + language + ".json", true);
            xhttp.send();
        }


        // Bit of a weird way to get the language param, but github does not support server side code.
        var url = window.location.href
        if (url.includes("?")) {
            var urlLanguageParam = url.split("?")[1].split("=")[1]
            console.log(urlLanguageParam)
            if (urlLanguageParam == "dk") {
                getAndApplyLanguage("danish")
            }
            else {
                getAndApplyLanguage("english")
            }
        }
        else {
            getAndApplyLanguage("english")
        }


        flagEnglish.addEventListener("click", function() {
            getAndApplyLanguage('english')
        })

        flagDanish.addEventListener("click" , function() {
            getAndApplyLanguage('danish')
        })

    </script>

</body>

</html>